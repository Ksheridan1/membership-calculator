<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Exterior Service Membership Calculator</title>
  <style>
    :root {
      --bg: #f3f6fb;
      --card: #ffffff;
      --text: #1f2937;
      --muted: #6b7280;
      --accent: #0f766e;
      --accent-hover: #115e59;
      --border: #d1d5db;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(180deg, #eaf2ff 0%, var(--bg) 100%);
      color: var(--text);
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 24px;
    }

    .calculator {
      width: min(760px, 100%);
      background: var(--card);
      border-radius: 14px;
      box-shadow: 0 12px 30px rgba(31, 41, 55, 0.12);
      padding: 26px;
    }

    h1 {
      margin: 0 0 8px;
      font-size: 1.7rem;
    }

    .subtext {
      margin: 0 0 20px;
      color: var(--muted);
      line-height: 1.4;
    }

    .grid {
      display: grid;
      gap: 14px;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    label {
      font-weight: 600;
      font-size: 0.92rem;
    }

    input,
    select {
      width: 100%;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px 12px;
      font-size: 1rem;
      transition: border-color 0.15s ease;
      background: #fff;
    }

    input:focus,
    select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(15, 118, 110, 0.15);
    }

    .checkbox-field {
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
    }

    .checkbox-field input[type="checkbox"] {
      width: auto;
      margin: 0;
    }

    button {
      margin-top: 18px;
      width: 100%;
      border: none;
      border-radius: 9px;
      background: var(--accent);
      color: #fff;
      font-size: 1rem;
      font-weight: 700;
      padding: 12px;
      cursor: pointer;
      transition: background 0.15s ease;
    }

    button:hover {
      background: var(--accent-hover);
    }

    .results {
      margin-top: 20px;
      border: 1px solid #dbe5ff;
      background: #f8fbff;
      border-radius: 10px;
      padding: 14px;
      display: none;
    }

    .results h2 {
      margin: 0 0 10px;
      font-size: 1.1rem;
    }

    .result-row {
      display: flex;
      justify-content: space-between;
      gap: 16px;
      padding: 7px 0;
      border-bottom: 1px dashed #d7def4;
    }

    .result-row:last-child {
      border-bottom: none;
    }

    .amount {
      font-weight: 700;
    }
  </style>
</head>
<body>
  <main class="calculator">
    <h1>Annual Membership Price Calculator</h1>
    <p class="subtext">
      Enter service pricing, frequencies, add-ons, and discount, then click <strong>Calculate</strong>
      to see annual retail value, discount amount, final annual membership price, and monthly subscription.
    </p>

    <div class="grid">
      <div class="field">
        <label for="softWash">Soft wash price ($)</label>
        <input id="softWash" type="number" min="0" step="0.01" placeholder="0.00" />
      </div>
      <div class="field">
        <label for="softWashFrequency">Soft wash frequency</label>
        <select id="softWashFrequency">
          <option value="1">1x per year</option>
          <option value="2">2x per year</option>
        </select>
      </div>

      <div class="field">
        <label for="gutterFeet">Gutter linear feet</label>
        <input id="gutterFeet" type="number" min="0" step="1" placeholder="0" />
      </div>
      <div class="field">
        <label for="gutterRate">Price per gutter foot ($)</label>
        <input id="gutterRate" type="number" min="0" step="0.01" placeholder="0.00" />
      </div>
      <div class="field">
        <label for="gutterFrequency">Gutter cleaning frequency</label>
        <select id="gutterFrequency">
          <option value="1">1x per year</option>
          <option value="2">2x per year</option>
        </select>
      </div>

      <div class="field">
        <label for="windowCount">Exterior window count</label>
        <input id="windowCount" type="number" min="0" step="1" placeholder="0" />
      </div>
      <div class="field">
        <label for="windowRate">Price per exterior window ($)</label>
        <input id="windowRate" type="number" min="0" step="0.01" placeholder="0.00" />
      </div>
      <div class="field">
        <label for="windowFrequency">Exterior windows frequency</label>
        <select id="windowFrequency">
          <option value="2">2x per year</option>
          <option value="3">3x per year</option>
        </select>
      </div>

      <div class="field">
        <label for="drivewayPrice">Driveway pressure wash price ($)</label>
        <input id="drivewayPrice" type="number" min="0" step="0.01" placeholder="0.00" />
      </div>
      <div class="field">
        <label for="drivewayFrequency">Driveway frequency</label>
        <select id="drivewayFrequency">
          <option value="0">0x per year</option>
          <option value="1">1x per year</option>
        </select>
      </div>

      <div class="field">
        <label class="checkbox-field" for="waterFeatureEnabled"><input id="waterFeatureEnabled" type="checkbox" /> Water feature maintenance</label>
        <input id="waterMonthly" type="number" min="0" step="0.01" placeholder="Monthly price (0.00)" />
      </div>

      <div class="field">
        <label class="checkbox-field" for="gutterGuardEnabled"><input id="gutterGuardEnabled" type="checkbox" /> Gutter guard install</label>
        <input id="gutterGuardPrice" type="number" min="0" step="0.01" placeholder="Add-on price (0.00)" disabled />
      </div>

      <div class="field">
        <label class="checkbox-field" for="interiorWindowsEnabled"><input id="interiorWindowsEnabled" type="checkbox" /> Interior windows</label>
        <input id="interiorWindowsPrice" type="number" min="0" step="0.01" placeholder="Add-on price (0.00)" disabled />
      </div>

      <div class="field">
        <label class="checkbox-field" for="ventInspectionEnabled"><input id="ventInspectionEnabled" type="checkbox" /> Vent/boot inspection</label>
        <input id="ventInspectionPrice" type="number" min="0" step="0.01" placeholder="Add-on price (0.00)" disabled />
      </div>

      <div class="field">
        <label for="discountRate">Membership discount</label>
        <select id="discountRate">
          <option value="0">0%</option>
          <option value="0.05">5%</option>
          <option value="0.10">10%</option>
          <option value="0.15">15%</option>
        </select>
      </div>
    </div>

    <button id="calculateBtn" type="button">Calculate</button>

    <section class="results" id="results" aria-live="polite">
      <h2>Results</h2>
      <div class="result-row">
        <span>Annual retail value</span>
        <span class="amount" id="annualRetailValue">$0.00</span>
      </div>
      <div class="result-row">
        <span>Discount amount</span>
        <span class="amount" id="discountAmount">$0.00</span>
      </div>
      <div class="result-row">
        <span>Final annual membership price</span>
        <span class="amount" id="finalAnnualMembershipPrice">$0.00</span>
      </div>
      <div class="result-row">
        <span>Monthly subscription price</span>
        <span class="amount" id="monthlySubscriptionPrice">$0.00</span>
      </div>
    </section>
  </main>

  <script>
    // Returns a numeric value from an input. If blank/invalid, it safely defaults to 0.
    const getInputNumber = (id) => Number.parseFloat(document.getElementById(id).value) || 0;

    // Reads a <select> value as a number.
    const getSelectNumber = (id) => Number.parseFloat(document.getElementById(id).value) || 0;

    // Formats numbers as USD currency for clean display.
    const asCurrency = (value) =>
      new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD"
      }).format(value);

    // Enables or disables an add-on amount input based on its checkbox.
    function toggleAddonInput(checkboxId, inputId) {
      const checked = document.getElementById(checkboxId).checked;
      const input = document.getElementById(inputId);
      input.disabled = !checked;
      if (!checked) input.value = "";
    }

    function calculateMembershipPricing() {
      // 1) Collect base service pricing and selected service frequencies.
      const softWashPrice = getInputNumber("softWash");
      const gutterLinearFeet = getInputNumber("gutterFeet");
      const gutterPricePerFoot = getInputNumber("gutterRate");
      const windowCount = getInputNumber("windowCount");
      const pricePerWindow = getInputNumber("windowRate");
      const drivewayPrice = getInputNumber("drivewayPrice");

      const softWashFrequency = getSelectNumber("softWashFrequency");
      const gutterFrequency = getSelectNumber("gutterFrequency");
      const windowFrequency = getSelectNumber("windowFrequency");
      const drivewayFrequency = getSelectNumber("drivewayFrequency");

      // 2) Calculate base annual service totals with frequency multipliers.
      const softWashAnnual = softWashPrice * softWashFrequency;
      const gutterAnnual = gutterLinearFeet * gutterPricePerFoot * gutterFrequency;
      const exteriorWindowsAnnual = windowCount * pricePerWindow * windowFrequency;
      const drivewayAnnual = drivewayPrice * drivewayFrequency;

      // 3) Include selected add-ons.
      const waterFeatureAnnual = document.getElementById("waterFeatureEnabled").checked
        ? getInputNumber("waterMonthly") * 12
        : 0;
      const gutterGuardAnnual = document.getElementById("gutterGuardEnabled").checked
        ? getInputNumber("gutterGuardPrice")
        : 0;
      const interiorWindowsAnnual = document.getElementById("interiorWindowsEnabled").checked
        ? getInputNumber("interiorWindowsPrice")
        : 0;
      const ventInspectionAnnual = document.getElementById("ventInspectionEnabled").checked
        ? getInputNumber("ventInspectionPrice")
        : 0;

      // 4) Calculate annual retail total before discount.
      const annualRetailTotal =
        softWashAnnual +
        gutterAnnual +
        exteriorWindowsAnnual +
        drivewayAnnual +
        waterFeatureAnnual +
        gutterGuardAnnual +
        interiorWindowsAnnual +
        ventInspectionAnnual;

      // 5) Apply discount after annual retail is calculated.
      const discountRate = getSelectNumber("discountRate");
      const discountAmount = annualRetailTotal * discountRate;
      const finalAnnualMembershipPrice = annualRetailTotal - discountAmount;
      const monthlySubscriptionPrice = finalAnnualMembershipPrice / 12;

      // 6) Show updated output values.
      document.getElementById("annualRetailValue").textContent = asCurrency(annualRetailTotal);
      document.getElementById("discountAmount").textContent = asCurrency(discountAmount);
      document.getElementById("finalAnnualMembershipPrice").textContent = asCurrency(finalAnnualMembershipPrice);
      document.getElementById("monthlySubscriptionPrice").textContent = asCurrency(monthlySubscriptionPrice);
      document.getElementById("results").style.display = "block";
    }

    // Wire add-on checkboxes to enable/disable their corresponding manual amount inputs.
    document.getElementById("gutterGuardEnabled").addEventListener("change", () =>
      toggleAddonInput("gutterGuardEnabled", "gutterGuardPrice")
    );
    document.getElementById("interiorWindowsEnabled").addEventListener("change", () =>
      toggleAddonInput("interiorWindowsEnabled", "interiorWindowsPrice")
    );
    document.getElementById("ventInspectionEnabled").addEventListener("change", () =>
      toggleAddonInput("ventInspectionEnabled", "ventInspectionPrice")
    );

    // Wire the Calculate button to the calculation function.
    document.getElementById("calculateBtn").addEventListener("click", calculateMembershipPricing);
  </script>
</body>
</html>
